<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Sjobq by nfaguirrec</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Sjobq</h1>
        <h2>Simple Bash Job Queue</h2>
        <a href="https://github.com/nfaguirrec/sjobq" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <p>SJobQ is a very simple queue system written in Bourne shell. It manages serial executions that run in a local form. The aim is to keep the computer working all the time, in order to exploit as much as possible your available computing resources. Regarding standard available programs to manage queues, very often they are a bit complicated to install and/or to configure, or simply you need administrative privileges to install them and you have no those permissions. For these cases, SJobQ is the solution, because in order to install it, you only need to download six files and that's all !. You can start to work. </p>

<h3>
<a id="installing" class="anchor" href="#installing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>INSTALLING</h3>

<p>Download the .zip file from this page and extract the files,</p>

<pre><code>$ unzip sjobq-master.zip
Archive:  sjobq-master.zip
1dde49967385f2ba76d34a1af52f70df9d4174f9
   creating: sjobq-master/
  inflating: sjobq-master/README.md
  inflating: sjobq-master/sjobq.d
  inflating: sjobq-master/sjobq.del
  inflating: sjobq-master/sjobq.push
  inflating: sjobq-master/sjobq.stat
$ mv sjobq-master/ sjobq
</code></pre>

<p>or clone the repository using git</p>

<pre><code>$ git clone https://github.com/nfaguirrec/sjobq.git
</code></pre>

<p>This should be the content of the sjobq directory if previous steps were successful:</p>

<pre><code>$ ls sjobq
README.md  sjobq.client  sjobq.daemon  sjobq.del  sjobq.sort  sjobq.push  sjobq.stat
</code></pre>

<p>Finally, to install the program, you simply have to copy the files in a directory included in the PATH system variable, as for example bin in your home directory:</p>

<pre><code>$ cp sjobq/* $HOME/bin/
</code></pre>

<h3>
<a id="demon-startup" class="anchor" href="#demon-startup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>DEMON STARTUP</h3>

<pre><code>$ sjobq.daemon start
==============================
 SJobQ daemon has been started
==============================
</code></pre>

<h3>
<a id="putting-jobs-in-the-queue" class="anchor" href="#putting-jobs-in-the-queue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>PUTTING JOBS IN THE QUEUE</h3>

<p>To put jobs into queue, use the command sjob.queue before its statement.
Its important to point out you have to use the character \ if you are going to use special bash characters like !,$,#.</p>

<pre><code>$ sjobq.push sleep 30s
id      = 1
command = sleep 30s
dir     = ~/Downloads

$ sjobq.push echo \"Hola\"
id      = 2
command = echo "Hola"
dir     = ~/Downloads

$ sjobq.push find /etc/ -name \"\*.conf\" \&gt; output \; sleep 30
id      = 3
command = find /etc/ -name "*.conf" &gt; output ; sleep 30
dir     = ~/Downloads
</code></pre>

<h3>
<a id="checking-jobs-status" class="anchor" href="#checking-jobs-status" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CHECKING JOBS STATUS</h3>

<p>The command sjobq.stat will show the jobs which they are running, queued and those what already have finished.</p>

<pre><code>$ sjobq.stat
+-------------+
| Current job |
+-------------+

pid          = 29406
command      = sleep 30s
dir          = ~/Downloads
time spent   = 00-00:00:09
pids         = 29406 
tree         =
        sleep(29406)

+-------+
| QUEUE |
+-------+------------------+--------------------
|    id |        directory |  command
|       |                  |  
|     2 |      ~/Downloads |  echo "Hola"
|     3 |      ~/Downloads |  find /etc/ -name "*.conf" &gt; output ; sleep 30
+-------+------------------+--------------------
</code></pre>

<p>after 2 minutes ...</p>

<pre><code>$ sjobq.stat

+-------------+
| HISTORY     |
+-------------+------------------+--------------------
|  time spent |        directory |  command
|             |                  |  
| 00-00:00:30 |      ~/Downloads |  sleep 30s
| 00-00:00:04 |      ~/Downloads |  echo "Hola"
| 00-00:00:31 |      ~/Downloads |  find /etc/ -name "*.conf" &gt; output ; sleep 30
+-------------+------------------+--------------------
</code></pre>

<h3>
<a id="deleting-and-sorting-jobs" class="anchor" href="#deleting-and-sorting-jobs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>DELETING AND SORTING JOBS</h3>

<p>Let's consider you put the following commands in the queue </p>

<pre><code>$ sjobq.push sleep 1h
id      = 4
command = sleep 1h
dir     = ~/Downloads

$ sjobq.push sleep 2h
id      = 5
command = sleep 1h
dir     = ~/Downloads

$ sjobq.push sleep 3h
id      = 6
command = sleep 1h
dir     = ~/Downloads

$ sjobq.push sleep 4h
id      = 6
command = sleep 1h
dir     = ~/Downloads

$ sjobq.stat
+-------------+
| Current job |
+-------------+

pid          = 30778
command      = sleep 1h
dir          = ~/Downloads
time spent   = 00-00:00:29
pids         = 30778 
tree         =
        sleep(30778)

+-------+
| QUEUE |
+-------+------------------+--------------------
|    id |        directory |  command
|       |                  |  
|     5 |      ~/Downloads |  sleep 2h
|     6 |      ~/Downloads |  sleep 3h
|     7 |      ~/Downloads |  sleep 4h
+-------+------------------+--------------------

+-------------+
| HISTORY     |
+-------------+------------------+--------------------
|  time spent |        directory |  command
|             |                  |  
| 00-00:00:30 |      ~/Downloads |  sleep 30s
| 00-00:00:04 |      ~/Downloads |  echo "Hola"
| 00-00:00:31 |      ~/Downloads |  find /etc/ -name "*.conf" &gt; output ; sleep 30
+-------------+------------------+--------------------
</code></pre>

<p>You can sort the queued jobs by using its identifier (id). The id is provided in the output of the sqjob.stat command.</p>

<p>For example:</p>

<p>Move the specified jobID to the top of the queue:</p>

<pre><code>$ sjobq.sort top 7
$ sjobq.stat
+-------------+
| Current job |
+-------------+

pid          = 30778
command      = sleep 1h
dir          = ~/Downloads
time spent   = 00-00:00:29
pids         = 30778 
tree         =
        sleep(30778)

+-------+
| QUEUE |
+-------+------------------+--------------------
|    id |        directory |  command
|       |                  |  
|     5 |      ~/Downloads |  sleep 4h
|     6 |      ~/Downloads |  sleep 3h
|     7 |      ~/Downloads |  sleep 2h
+-------+------------------+--------------------

+-------------+
| HISTORY     |
+-------------+------------------+--------------------
|  time spent |        directory |  command
|             |                  |  
| 00-00:00:30 |      ~/Downloads |  sleep 30s
| 00-00:00:04 |      ~/Downloads |  echo "Hola"
| 00-00:00:31 |      ~/Downloads |  find /etc/ -name "*.conf" &gt; output ; sleep 30
+-------------+------------------+--------------------
</code></pre>

<p>or swap two jobs in the queue:</p>

<pre><code>$ sjobq.sort swap 5 7
$ sjobq.stat
+-------------+
| Current job |
+-------------+

pid          = 30778
command      = sleep 1h
dir          = ~/Downloads
time spent   = 00-00:00:29
pids         = 30778 
tree         =
        sleep(30778)

+-------+
| QUEUE |
+-------+------------------+--------------------
|    id |        directory |  command
|       |                  |  
|     5 |      ~/Downloads |  sleep 2h
|     6 |      ~/Downloads |  sleep 3h
|     7 |      ~/Downloads |  sleep 4h
+-------+------------------+--------------------

+-------------+
| HISTORY     |
+-------------+------------------+--------------------
|  time spent |        directory |  command
|             |                  |  
| 00-00:00:30 |      ~/Downloads |  sleep 30s
| 00-00:00:04 |      ~/Downloads |  echo "Hola"
| 00-00:00:31 |      ~/Downloads |  find /etc/ -name "*.conf" &gt; output ; sleep 30
+-------------+------------------+--------------------
</code></pre>

<p>For more options, please take a look to the available parameters of the sjobq.sort command: raise,lower,top,bottom and swap.</p>

<p>You can also delete a queued job by using its identifier (id).</p>

<pre><code>$ sjobq.del 6
Job with id=6 has been deleted !!

$ sjobq.stat
+-------------+
| Current job |
+-------------+

pid          = 30778
command      = sleep 1h
dir          = ~/Downloads
time spent   = 00-00:00:29
pids         = 30778 
tree         =
        sleep(30778)

+-------+
| QUEUE |
+-------+------------------+----------
|    id |        directory |  command
|       |                  |  
|     5 |      ~/Downloads |  sleep 2h
|     7 |      ~/Downloads |  sleep 4h
+-------+------------------+----------

+-------------+
| HISTORY     |
+-------------+------------------+----------
|  time spent |        directory |  command
|             |                  |  
| 00-00:00:30 |      ~/Downloads |  sleep 30s
| 00-00:00:04 |      ~/Downloads |  echo "Hola"
| 00-00:00:31 |      ~/Downloads |  find /etc/ -name "*.conf" &gt; output ; sleep 30
+-------------+------------------+----------
</code></pre>

<p>It is also possible to delete the running job by using the identifier "current". </p>

<pre><code>$ sjobq.del current
Job with id=current has been deleted !!

$ sjobq.stat
+-------------+
| Current job |
+-------------+

pid          = 31544
command      = sleep 2h
dir          = ~/Downloads
time spent   = 00-00:00:05
pids         = 31544 
tree         =
        sleep(31544)

+-------+
| QUEUE |
+-------+------------------+----------
|    id |        directory |  command
|       |                  |  
|     7 |      ~/Downloads |  sleep 4h
+-------+------------------+----------

+-------------+
| HISTORY     |
+-------------+------------------+----------
|  time spent |        directory |  command
|             |                  |  
| 00-00:00:30 |      ~/Downloads |  sleep 30s
| 00-00:00:04 |      ~/Downloads |  echo "Hola"
| 00-00:00:31 |      ~/Downloads |  find /etc/ -name "*.conf" &gt; output ; sleep 30
| 00-00:02:57 |      ~/Downloads |  sleep 1h
+-------------+------------------+----------
</code></pre>

<h3>
<a id="daemon-shutdown" class="anchor" href="#daemon-shutdown" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>DAEMON SHUTDOWN</h3>

<p>If you want simply to stop the daemon:</p>

<pre><code>$ sjobq.d stop
==============================
 SJobQ daemon has been stopped
==============================
</code></pre>

<p>Note that the current job will be still running after this. Additionally, those enqueued jobs will be recovered when daemon is restarted. </p>

<p>If you want to stop the daemon and clean all configuration data:</p>

<pre><code>$ sjobq.d stop clean
Job with id=current has been deleted !!
The SjobQ configuration has been cleaned up successfully !!
==============================
 SJobQ daemon has been stopped
==============================
</code></pre>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>Néstor F. Aguirre (<a href="https://github.com/nfaguirrec" class="user-mention">@nfaguirrec</a>) 2010-2016
<a href="http://nfaguirrec.github.io/sjobq/">http://nfaguirrec.github.io/sjobq/</a></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/nfaguirrec/sjobq/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/nfaguirrec/sjobq/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/nfaguirrec/sjobq"></a> is maintained by <a href="https://github.com/nfaguirrec">nfaguirrec</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-22447949-9");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
